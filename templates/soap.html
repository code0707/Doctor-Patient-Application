<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='soapstyles.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js"></script>
    <script src="https://unpkg.com/jspdf@1.5.3/dist/jspdf.min.js"></script>
    <script src="https://unpkg.com/jspdf-autotable@3.5.6/dist/jspdf.plugin.autotable.js"></script>
  </head>
  <body>
    <div id="container">
      <h1 id="headermain">SOAP</h1>
      <div id="bar"></div>
      <table id="my-table">
        <tr>
          <td colspan="2" class="onehead">
            SOAP Note for Artificial Scribe
          </td>
        </tr>
        
        <tr>
          <td class="one">S-Subjective</td>
          <td class="two">
            {% for i in (prediction_text1) %} 
       {{ i }} 
       <br>
      {% endfor %}  
            </td>
        </tr>
        <tr>
          <td class="one">O-Objective</td>
          <td class="two">
            {% for i in (prediction_text2) %} 
       {{ i }} 
       <br>
      {% endfor %}  
            </td>
        </tr>
        <tr>
          <td class="one">A-Assessment</td>
          <td class="two">
            {% for i in (prediction_text3) %} 
       {{ i }} 
       <br>
      {% endfor %}  
            </td>
        </tr>
        <tr>
          <td class="one">P-Plan</td>
          <td class="two">
            {% for i in (prediction_text4) %} 
       {{ i }} 
       <br>
      {% endfor %}  
            </td>
        </tr>
      </table>
    </div>
    <button onclick="clicked()">Download as PDF</button>
  </body>
  <script>
    function clicked() {
      var doc = new jsPDF();
      var header = function (data) {
        doc.setFontSize(35);
        doc.setTextColor(40);
        doc.setFontStyle('normal');
        doc.text('SOAP format', data.settings.margin.left, 40);
      };

      doc.autoTable({
        beforePageContent: header,
        styles: { fontSize: 16, lineWidth: 0.5 },
        columnStyles: {
          0: { halign: 'center', cellWidth: 45, minCellHeight: 20 },
        },
        margin: { top: 60 },
        html: '#my-table',
      });
      doc.save('p1.pdf');
    }
  </script>
</html>
